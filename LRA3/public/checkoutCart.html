<!------------------ Created by Lui Rabideau, due on 12/15/2023 ---------------------->
<!-- Design from W3schools: W3.CSS 4.15 December 2020 by Jan Egil and Borge Refsnes -->
<!-------- (https://www.w3schools.com/w3css/tryw3css_templates_architect.htm) -------->
<!----------------------------- UHM ITM352 Assignment 3 ------------------------------>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Invoice</title>
<!-- files needed to run the page (the CSS and favicon are included in the headDeclarations function) -->
<link rel="stylesheet" href="./css/invoice.css">
<script src="./functions.js"></script>
<script>headDeclarations()</script>
</head>
<body>
  <!-- Navbar -->
  <script>navBar()</script>
  <br><br><br><br>
  <!-- Content -->
  <div class="invoice">
    <div class="invoice-header">
      <h2>Invoice</h2>
      <script>
        invoicePersonalization()
      </script>
        <div id="currentDateContainer"></div>
<!-- Interpretting the query string -->
<script>
  let params = (new URL(document.location)).searchParams;
  let quantities = [];
  // form was submitted so process the invoice
  if (params.has('purchase_submit')) {
    for (let i in products) {
      if (params.has(`quantity${i}`)) {
        a_qty = params.get(`quantity${i}`);
        quantities[i] = a_qty;
      };
    };
  } else {
    // it would be pretty difficult to see this message, but i'm keeping it because i think it still may be possible to access
    document.write('no form submitted');
  };
  //Subtotal
  let subtotal = 0;
  // Function to get the current date in the format YYYY-MM-DD
  getCurrentDate()
  // Update HTML content with the current date
  document.getElementById('currentDateContainer').innerText = `Current Date: ${getCurrentDate()}`;
</script>
    </div>
    <!-- the actual invoice -->
    <div class="invoice-body">
      <h3>Order Details</h3>
      <table>
        <thead>
          <tr>
            <th style="width: 10%;">Preview</th>
            <th>Product</th>
            <th>Quantity</th>
            <th>Unit Price</th>
            <th>Total</th>
          </tr>
        </thead>
      <tbody>
        <script>
          // Calling the function
          generateInvoiceTable();
        </script>   
        <!-- Subtotal and Shipping costs portion of the table -->
            <tr>
              <td colspan="4">Subtotal</td>
              <td><script>document.write('$'+(subtotal).toFixed(2))</script></td>
            </tr>
            <tr>
              <td colspan="4">Shipping Cost</td>
              <td><script>document.write('$'+(shipping).toFixed(2))</script></td>
            </tr>
            <tr>
              <td colspan="4">Tax (4.74%)</td>
              <td><script>document.write('$'+(tax).toFixed(2))</script></td>
            </tr>
            <tr>
              <td colspan="4">Total</td>
              <td><script>document.write('$'+(gTotal).toFixed(2))</script></td>
            </tr>
      </tbody>
      </table>
      <!-- table end -->
    </div>
      <p><a href="./thankyouPage.html">continue</a></p>
    <!-- Shipping Policy details -->
      <p style="font-weight: bold;">SHIPPING POLICY IS:</p>
      <p>Subtotals under or equal to $100 will be charged shipping equal to 5% of the subtotal amount</p>
      <p>Subtotals over $100 will be charged shipping equal to 10% of the subtotal amount</p>
      <p>Girl math states that any subtotal under or equal to $100 is hereby 5% off</p>
      
  </div>
</body>
</html>
<!-- Created by Lui Rabideau on 12/5/2023 -->
<!-- Design from W3schools: W3.CSS 4.15 December 2020 by Jan Egil and Borge Refsnes -->
<!-- (https://www.w3schools.com/w3css/tryw3css_templates_architect.htm) -->
<!-- UHM ITM352 Assignment 2 -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chicago Skyscrapers</title>
<!-- files needed to run the page (the CSS and favicon are included in the headDeclarations function) -->
<link rel="stylesheet" href="./css/products.css">
<script src="./functions.js"></script>
<script>headDeclarations()</script>
</head>
<script>
  let prod_key = "Chicago";
  let products = all_products[prod_key];
  productsPageErrors()

  // This function asks the server for a "service" and converts the response to text. 
  function loadJSON(service, callback) {   
      let xobj = new XMLHttpRequest();
      xobj.overrideMimeType("application/json");
      xobj.open('POST', service, false);
      xobj.onreadystatechange = function () {
            if (xobj.readyState == 4 && xobj.status == "200") {
              // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
              callback(xobj.responseText);
            }
      };
      xobj.send(null);  
   }
  // get the shopping cart data for this user
  loadJSON('get_cart', function (response) {
            // Parsing JSON string into object
            shopping_cart = JSON.parse(response);
        });

</script>
<body>
    <!-- Navbar <button id="myButton" onclick="changeButtonName()" name="purchase">Click me</button> -->
    <script>navBar()</script>
    <br><br>

    <div class="container">
        <h2>Chicago Skyscrapers</h2>    
        <form action="/login.html" method="GET" name="checkout">
          <p style="text-align: center;"><button type="submit">checkout</button></p>
        </form>
<!-- Form Begin -->
<form action="./process_purchase" method="POST" name="purchase_form">
        <p id="leButton" style="color: red; text-align: center;"></p>
        <!-- Generates the products -->
        <script>
            productsPage();
        </script>
  <input type="hidden" id="location3" name="location" value="Chicago">
</form>
<!-- Form End -->
    </div>
</body>
</html>
